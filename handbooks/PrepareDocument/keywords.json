{
  "project": "bakerfi-contracts",
  "updated_at": "2025-10-10",
  "schema": {
    "keyword": "字符串，唯一关键词",
    "meaning": "中文释义或定义",
    "role_in_project": "该关键词在项目中的实际作用/职责",
    "module_path": "代码主路径（如有）",
    "docs": "相关文档路径列表",
    "LATER": "与 LATER 宏观维度的对应标签列表",
    "stage_relevance": "涉及的阶段列表：stage1|stage2|stage3",
    "related_commands": "复验或关联的命令列表",
    "notes": "补充说明"
  },
  "keywords": [
    {
      "keyword": "Vault",
      "meaning": "金库主合约，负责资产会计、份额发行与策略投资接口",
      "role_in_project": "管理 totalAssets/totalShares，处理 deposit/withdraw，与策略交互",
      "module_path": "contracts/core/Vault.sol",
      "docs": ["doc/core/Vault.md"],
      "LATER": ["A", "L"],
      "stage_relevance": ["stage1", "stage2", "stage3"],
      "related_commands": ["npx hardhat test test/core/vault/*", "npx hardhat coverage"],
      "notes": "资产守恒与 pricePerShare 单调需在阶段2证据化"
    },
    {
      "keyword": "VaultRouter",
      "meaning": "用户入口与批量操作路由，负责参数校验与跨模块调用",
      "role_in_project": "承接用户操作并路由到 Vault/策略，保障金额与事件一致",
      "module_path": "contracts/core/VaultRouter.sol",
      "docs": ["doc/core/VaultRouter.md"],
      "LATER": ["R", "L"],
      "stage_relevance": ["stage1", "stage2", "stage3"],
      "related_commands": ["npx hardhat test test/core/vault/*"],
      "notes": "批处理路径与输入校验是重点"
    },
    {
      "keyword": "MultiStrategy",
      "meaning": "多策略管理与再平衡，分配资产到不同策略",
      "role_in_project": "维护策略集合与分配规则，确保总资产守恒与再平衡一致",
      "module_path": "contracts/core/MultiStrategy.sol",
      "docs": ["doc/core/MultiStrategy.md"],
      "LATER": ["A", "R"],
      "stage_relevance": ["stage1", "stage2", "stage3"],
      "related_commands": ["npx hardhat test test/core/strategies/*"],
      "notes": "异常路径回滚与事件一致性需验证"
    },
    {
      "keyword": "MultiCommand",
      "meaning": "批处理原子命令，保证操作全成/全败",
      "role_in_project": "在一次事务中打包多个调用，失败整体回滚",
      "module_path": "contracts/core/MultiCommand.sol",
      "docs": ["doc/core/MultiCommand.md"],
      "LATER": ["R"],
      "stage_relevance": ["stage1", "stage2", "stage3"],
      "related_commands": ["npx hardhat test test/hooks/*"],
      "notes": "原子性断言与事件顺序需证据化"
    },
    {
      "keyword": "BakerFiProxy",
      "meaning": "升级代理合约，负责实现切换与初始化",
      "role_in_project": "提供可升级框架，要求存储槽位兼容与 initialize 幂等",
      "module_path": "contracts/proxy/BakerFiProxy.sol",
      "docs": ["doc/proxy/BakerFiProxy.md", "doc/storage-compatibility.md"],
      "LATER": ["R", "L"],
      "stage_relevance": ["stage1", "stage2", "stage3"],
      "related_commands": ["npx hardhat test test/proxy/*", "node scripts/upgrade-v1.1.0.ts"],
      "notes": "选择器集合与版本标签需比对"
    },
    {
      "keyword": "ProxyAdmin",
      "meaning": "代理管理员，负责升级与回滚控制",
      "role_in_project": "控制实现合约版本与权限，需最小授权与可审计操作",
      "module_path": "",
      "docs": ["doc/proxy/BakerFiProxyAdmin.md"],
      "LATER": ["T", "R"],
      "stage_relevance": ["stage1", "stage2", "stage3"],
      "related_commands": ["node scripts/upgrade-*.ts"],
      "notes": "与治理/Owner 角色边界需清晰"
    },
    {
      "keyword": "Oracles",
      "meaning": "价格/比率预言机集合，提供外部数据输入",
      "role_in_project": "为资产计价与变更提供数据，新鲜度/单位精度需控制",
      "module_path": "contracts/oracles",
      "docs": ["doc/oracles/PythOracle.md", "doc/oracles/ChainLinkOracle.md", "doc/oracles/RatioOracle.md", "doc/oracles/ExRateOracle.md"],
      "LATER": ["E"],
      "stage_relevance": ["stage1", "stage2", "stage3"],
      "related_commands": ["npx hardhat test test/oracles/*"],
      "notes": "延迟/极值/单位偏差阈值在阶段2具体化"
    },
    {
      "keyword": "PythOracle",
      "meaning": "基于 Pyth 的预言机实现",
      "role_in_project": "从 Pyth 数据源读取价格，提供单位一致与新鲜度保障",
      "module_path": "contracts/oracles/PythOracle.sol",
      "docs": ["doc/oracles/PythOracle.md"],
      "LATER": ["E"],
      "stage_relevance": ["stage1", "stage2", "stage3"],
      "related_commands": ["npx hardhat test test/pyth/PythOracle.ts"],
      "notes": "测试中包含延迟/单位验证"
    },
    {
      "keyword": "ChainlinkOracle",
      "meaning": "基于 Chainlink 的价格预言机",
      "role_in_project": "提供链上价格数据，作为可信输入源",
      "module_path": "",
      "docs": ["doc/oracles/ChainLinkOracle.md"],
      "LATER": ["E"],
      "stage_relevance": ["stage1", "stage2", "stage3"],
      "related_commands": [],
      "notes": "具体实现与适配按实例补充"
    },
    {
      "keyword": "RatioOracle",
      "meaning": "比率型预言机，输出资产比率/汇率",
      "role_in_project": "用于内部计价或转换逻辑",
      "module_path": "",
      "docs": ["doc/oracles/RatioOracle.md"],
      "LATER": ["E"],
      "stage_relevance": ["stage1", "stage2"],
      "related_commands": [],
      "notes": "依赖外部数据源或内部计算"
    },
    {
      "keyword": "ExRateOracle",
      "meaning": "汇率预言机，实现币种间兑换比率",
      "role_in_project": "用于跨资产计价与兑换逻辑",
      "module_path": "",
      "docs": ["doc/oracles/ExRateOracle.md"],
      "LATER": ["E"],
      "stage_relevance": ["stage1", "stage2"],
      "related_commands": [],
      "notes": "需要单位与精度一致性"
    },
    {
      "keyword": "Strategies",
      "meaning": "策略实现集合，管理外部协议投资与回流",
      "role_in_project": "与外部协议交互，持有/赎回资产，参与再平衡",
      "module_path": "contracts/core/strategies",
      "docs": ["doc/core/strategies"],
      "LATER": ["A", "R"],
      "stage_relevance": ["stage1", "stage2", "stage3"],
      "related_commands": ["npx hardhat test test/core/strategies/*"],
      "notes": "依赖协议安全假设与接口稳定性"
    },
    {
      "keyword": "Libraries",
      "meaning": "通用库与工具（数学、交换、协议适配）",
      "role_in_project": "支持核心逻辑与策略实现的通用函数",
      "module_path": "contracts/libraries",
      "docs": ["doc/libraries/MathLibrary.md", "doc/libraries/RebaseLibrary.md"],
      "LATER": ["L"],
      "stage_relevance": ["stage2"],
      "related_commands": [],
      "notes": "库函数需审阅溢出与精度"
    },
    {
      "keyword": "totalAssets",
      "meaning": "金库总资产，通常为 held + invested",
      "role_in_project": "资产会计核心指标，驱动 pricePerShare",
      "module_path": "contracts/core/Vault.sol",
      "docs": ["doc/core/Vault.md"],
      "LATER": ["A"],
      "stage_relevance": ["stage1", "stage2"],
      "related_commands": ["npx hardhat test test/core/vault/*"],
      "notes": "守恒与非负性为阶段2断言"
    },
    {
      "keyword": "totalShares",
      "meaning": "发行的总份额，用于计算 pricePerShare",
      "role_in_project": "份额会计与用户资产权益计算",
      "module_path": "contracts/core/Vault.sol",
      "docs": ["doc/core/Vault.md"],
      "LATER": ["A"],
      "stage_relevance": ["stage1", "stage2"],
      "related_commands": ["npx hardhat test test/core/vault/*"],
      "notes": "与费用/损益口径保持一致"
    },
    {
      "keyword": "pricePerShare",
      "meaning": "每份额价格，通常为 totalAssets/totalShares",
      "role_in_project": "反映金库价值变化的关键指标",
      "module_path": "contracts/core/Vault.sol",
      "docs": ["doc/core/Vault.md"],
      "LATER": ["A"],
      "stage_relevance": ["stage1", "stage2"],
      "related_commands": ["npx hardhat test test/core/vault/*"],
      "notes": "无损事件下应单调非负"
    },
    {
      "keyword": "BF ID",
      "meaning": "统一编号主键，绑定 Facts/Assertions/Evidence 与命令",
      "role_in_project": "阶段2/3的证据索引与聚合主键",
      "module_path": "audits/stage2",
      "docs": ["handbooks/Default/不成熟的想法-阶段2.md", "handbooks/Default/不成熟的想法-阶段3.md"],
      "LATER": ["L", "A", "T", "E", "R"],
      "stage_relevance": ["stage2", "stage3"],
      "related_commands": ["npx hardhat test", "npx hardhat coverage", "slither . --config-file slither.config.json"],
      "notes": "格式示例：BF-vault-s2-A-asset-001"
    },
    {
      "keyword": "LATER",
      "meaning": "宏观维度映射：L/A/T/E/R",
      "role_in_project": "统一阶段2四维到阶段3聚合维度的语义",
      "module_path": "",
      "docs": ["handbooks/Default/不成熟的想法-阶段3.md"],
      "LATER": ["L", "A", "T", "E", "R"],
      "stage_relevance": ["stage1", "stage2", "stage3"],
      "related_commands": [],
      "notes": "Structure→L；Value→A；Authority/Trust→T/E；Runtime→R"
    },
    {
      "keyword": "Authority",
      "meaning": "权限与角色的可调用边界",
      "role_in_project": "确定谁可调用哪些函数，最小授权原则",
      "module_path": "contracts/core/*",
      "docs": ["handbooks/Default/不成熟的想法-阶段1.md"],
      "LATER": ["T"],
      "stage_relevance": ["stage1", "stage2"],
      "related_commands": ["slither . --config-file slither.config.json"],
      "notes": "与 Trust 区分：Trust 是对外部依赖的信任"
    },
    {
      "keyword": "Trust",
      "meaning": "对外部组件/数据源的信任与验证",
      "role_in_project": "登记预言机与外部协议依赖，设定新鲜度/偏差边界",
      "module_path": "audits/stage2/trust_sources.md",
      "docs": ["handbooks/Default/不成熟的想法-阶段1.md"],
      "LATER": ["E", "T"],
      "stage_relevance": ["stage1", "stage2"],
      "related_commands": [],
      "notes": "在阶段2进行来源登记与阈值设定"
    },
    {
      "keyword": "Slither",
      "meaning": "静态分析工具，输出调用图、权限矩阵与风险报告",
      "role_in_project": "结构/权限层面的静态验证与风险识别",
      "module_path": "slither.config.json",
      "docs": [],
      "LATER": ["L", "T"],
      "stage_relevance": ["stage2", "stage3"],
      "related_commands": ["slither . --config-file slither.config.json"],
      "notes": "误报需注明原因与可接受风险"
    },
    {
      "keyword": "Hardhat",
      "meaning": "以 TypeScript 驱动的以太坊开发与测试框架",
      "role_in_project": "运行测试、覆盖率、部署与升级脚本",
      "module_path": "hardhat.config.ts",
      "docs": [],
      "LATER": ["A", "R"],
      "stage_relevance": ["stage2", "stage3"],
      "related_commands": ["npx hardhat test", "npx hardhat coverage"],
      "notes": "集成 gas reporter 可观测性能"
    },
    {
      "keyword": "solidity-coverage",
      "meaning": "覆盖率工具，统计测试行覆盖",
      "role_in_project": "确认关键路径被测试覆盖",
      "module_path": "",
      "docs": [],
      "LATER": ["R"],
      "stage_relevance": ["stage2", "stage3"],
      "related_commands": ["npx hardhat coverage"],
      "notes": "覆盖阈值建议 ≥70%"
    },
    {
      "keyword": "Echidna",
      "meaning": "不变量模糊测试工具",
      "role_in_project": "验证经济/安全不变量，阶段2可选接入",
      "module_path": "echidna.yaml",
      "docs": [],
      "LATER": ["A", "R"],
      "stage_relevance": ["stage2", "stage3"],
      "related_commands": ["echidna-test . --config echidna.yaml"],
      "notes": "Harness 合约需按需补充"
    },
    {
      "keyword": "Surya",
      "meaning": "合约可视化与调用图工具",
      "role_in_project": "导出调用图/权限矩阵作为结构证据",
      "module_path": "",
      "docs": [],
      "LATER": ["L", "T"],
      "stage_relevance": ["stage2", "stage3"],
      "related_commands": ["surya graph contracts/core/Vault.sol --output audits/stage2/graphs/vault.dot"],
      "notes": "可选工具，未安装可跳过"
    },
    {
      "keyword": "Mythril",
      "meaning": "符号执行工具，探索关键路径与潜在漏洞",
      "role_in_project": "验证升级/授权/批处理关键路径可达性",
      "module_path": "",
      "docs": [],
      "LATER": ["T", "R"],
      "stage_relevance": ["stage3"],
      "related_commands": ["myth analyze contracts/proxy/BakerFiProxy.sol -o json -t 300"],
      "notes": "按需使用"
    },
    {
      "keyword": "Gas Reporter",
      "meaning": "气体费用观测插件",
      "role_in_project": "记录性能边界与潜在 DoS 风险点",
      "module_path": "",
      "docs": [],
      "LATER": ["R"],
      "stage_relevance": ["stage2", "stage3"],
      "related_commands": ["npm run test"],
      "notes": "与 hardhat-gas-reporter 集成"
    },
    {
      "keyword": "Upgrade Scripts",
      "meaning": "升级与回滚脚本集合",
      "role_in_project": "记录升级证据链与版本切换过程",
      "module_path": "scripts/upgrade-*.ts",
      "docs": ["doc/proxy/BakerFiProxy.md"],
      "LATER": ["R"],
      "stage_relevance": ["stage2", "stage3"],
      "related_commands": ["node scripts/upgrade-v1.1.0.ts"],
      "notes": "结合 selectors.json 与槽位兼容检查"
    },
    {
      "keyword": "Function Selectors",
      "meaning": "函数选择器集合，用于升级兼容与比对",
      "role_in_project": "验证升级前后选择器集合变化与兼容性",
      "module_path": "constants/selectors.json",
      "docs": ["doc/storage-compatibility.md"],
      "LATER": ["L", "R"],
      "stage_relevance": ["stage2", "stage3"],
      "related_commands": [],
      "notes": "与 Proxy 版本标签配合"
    },
    {
      "keyword": "Initialize",
      "meaning": "初始化过程，要求只执行一次且幂等",
      "role_in_project": "确保合约初始状态正确且可审计",
      "module_path": "contracts/core/*",
      "docs": ["doc/core/Vault.md", "doc/proxy/BakerFiProxy.md"],
      "LATER": ["R"],
      "stage_relevance": ["stage1", "stage2", "stage3"],
      "related_commands": ["npx hardhat test test/proxy/*"],
      "notes": "阶段2需以测试断言与日志证明"
    },
    {
      "keyword": "Storage Compatibility",
      "meaning": "升级不破坏关键存储槽位的兼容性要求",
      "role_in_project": "保障升级安全与数据一致",
      "module_path": "doc/storage-compatibility.md",
      "docs": ["doc/storage-compatibility.md"],
      "LATER": ["L", "R"],
      "stage_relevance": ["stage3"],
      "related_commands": [],
      "notes": "与 EmptySlot/布局检查相关"
    },
    {
      "keyword": "SWC",
      "meaning": "智能合约弱点分类标准",
      "role_in_project": "为风险发现与证据绑定提供统一编号",
      "module_path": "",
      "docs": ["handbooks/Default/不成熟的想法-阶段3.md"],
      "LATER": ["L", "A", "T", "E", "R"],
      "stage_relevance": ["stage2", "stage3"],
      "related_commands": [],
      "notes": "如 SWC-107/112/116/128 等"
    },
    {
      "keyword": "SCSVS",
      "meaning": "智能合约安全验证标准",
      "role_in_project": "补充 SWC 覆盖，提供控制项编号",
      "module_path": "",
      "docs": ["handbooks/Default/不成熟的想法-阶段3.md"],
      "LATER": ["L", "A", "T", "E", "R"],
      "stage_relevance": ["stage2", "stage3"],
      "related_commands": [],
      "notes": "如 Asset-Accounting/Atomicity/AccessControl/Upgrade-Safety 等"
    },
    {
      "keyword": "VaultRegistry",
      "meaning": "金库注册表，管理金库集合",
      "role_in_project": "提供金库索引与管理接口",
      "module_path": "contracts/core/VaultRegistry.sol",
      "docs": ["doc/core/VaultRegistry.md"],
      "LATER": ["L"],
      "stage_relevance": ["stage1", "stage2"],
      "related_commands": [],
      "notes": "权限与治理边界需明确"
    },
    {
      "keyword": "VaultSettings",
      "meaning": "金库设置，参数与策略相关配置",
      "role_in_project": "控制金库运行参数与策略绑定",
      "module_path": "contracts/core/VaultSettings.sol",
      "docs": ["doc/core/VaultSettings.md"],
      "LATER": ["R", "L"],
      "stage_relevance": ["stage2"],
      "related_commands": [],
      "notes": "需审阅访问控制"
    },
    {
      "keyword": "Hooks",
      "meaning": "钩子模块，扩展运行时行为（如 Leverage/Swapper）",
      "role_in_project": "在操作路径中插入附加逻辑",
      "module_path": "contracts/core/hooks",
      "docs": ["doc/core/hooks"],
      "LATER": ["R"],
      "stage_relevance": ["stage2"],
      "related_commands": ["npx hardhat test test/hooks/*"],
      "notes": "需验证安全边界与事件一致性"
    },
    {
      "keyword": "Flashloan",
      "meaning": "闪电贷相关模块",
      "role_in_project": "用于特定策略或操作的临时流动性",
      "module_path": "contracts/core/flashloan",
      "docs": ["doc/core/flashloan"],
      "LATER": ["R", "A"],
      "stage_relevance": ["stage2"],
      "related_commands": [],
      "notes": "需确保资产守恒与回滚安全"
    }
  ]
}